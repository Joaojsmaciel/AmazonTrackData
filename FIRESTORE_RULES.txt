üî• REGRAS DO FIRESTORE - Importante Verificar!

Para que o app consiga salvar localiza√ß√µes, voc√™ precisa configurar as regras do Firestore.

üìç Como verificar/configurar:

1. Acesse: https://console.firebase.google.com
2. Selecione o projeto "fir-capdex"
3. V√° em "Firestore Database"
4. Clique na aba "Regras" (Rules)

‚ö†Ô∏è PROBLEMA COMUM:
Se suas regras estiverem assim:

```
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if false;  ‚ùå ISSO BLOQUEIA TUDO!
    }
  }
}
```

‚úÖ SOLU√á√ÉO - Use estas regras (tempor√°rio para testes):

```
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // Permite ler usu√°rios apenas se autenticado
    match /users/{userId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Permite ler/escrever embarca√ß√µes (boats)
    match /boats/{boatId} {
      allow read: if request.auth != null;
      allow create: if request.auth != null && request.resource.data.ownerId == request.auth.uid;
      allow update, delete: if request.auth != null && resource.data.ownerId == request.auth.uid;
    }
    
    // Permite ler/escrever localiza√ß√µes se autenticado
    match /locations/{userId}/tracks/{trackId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
  }
}
```

üîí REGRAS MAIS SEGURAS (recomendado para produ√ß√£o):

```
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // Usu√°rios
    match /users/{userId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Embarca√ß√µes (boats) - apenas o dono pode modificar
    match /boats/{boatId} {
      allow read: if request.auth != null;
      allow create: if request.auth != null && 
                      request.resource.data.ownerId == request.auth.uid;
      allow update, delete: if request.auth != null && 
                              resource.data.ownerId == request.auth.uid;
    }
    
    // Localiza√ß√µes - apenas o pr√≥prio usu√°rio pode escrever suas localiza√ß√µes
    match /locations/{userId}/tracks/{trackId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && request.auth.uid == userId;
    }
  }
}
```

üöÄ MODO DESENVOLVIMENTO (N√ÉO USE EM PRODU√á√ÉO!):

Se quiser apenas testar rapidamente:

```
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;  // ‚ö†Ô∏è CUIDADO: Sem seguran√ßa!
    }
  }
}
```

üì¶ REGRAS DO FIREBASE STORAGE:

Acesse: https://console.firebase.google.com ‚Üí Storage ‚Üí Rules

‚úÖ Use estas regras para permitir upload de fotos:

```
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    
    // Fotos de embarca√ß√µes - apenas usu√°rios autenticados
    match /boat_images/{imageId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
    
    // Fotos de perfil
    match /profile_images/{imageId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
  }
}
```

üöÄ Storage em MODO DESENVOLVIMENTO (teste r√°pido):

```
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    match /{allPaths=**} {
      allow read, write: if request.auth != null;
    }
  }
}
```

üìù DEPOIS DE ALTERAR:
1. Clique em "Publicar" (Publish)
2. Aguarde alguns segundos
3. Teste novamente o app

üí° COMO SABER SE √â PROBLEMA DE REGRAS:

No Logcat, voc√™ ver√° algo como:
‚ùå PERMISSION_DENIED: Missing or insufficient permissions
‚ùå FirebaseFirestoreException: PERMISSION_DENIED
‚ùå StorageException: User does not have permission (c√≥digo 403)
